---

extends:
  - base-tmt-container_pipeline
  - base-tmt-container_checks

marks:
  - public
  - pipeline

variables:
  REQUEST_ID: 5ad63151-bd14-47b1-88db-7e3613f02da5
  ARCH: x86_64
  RESULT: PASSED
  GIT_CLONE_URL: https://gitlab.com/testing-farm/tests
  GIT_REF: main
  PLAN: /testing-farm/test-filter

checks:
  literal-patterns[results.xml]:
    - |
      <?xml version="1.0" encoding="UTF-8"?>
      <testsuites overall-result="passed">
       <properties>
        <property name="baseosci.overall-result" value="passed"/>
       </properties>
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       {{ skipped_testsuite_pattern }}
       <testsuite name="{{ PLAN }}" result="passed" tests="1" stage="complete">
        <logs>
         <log href="{{ artifacts_url_pattern }}/{{ REQUEST_ID }}/work-test-filter{{ '.+' }}{{ PLAN }}/data" name="data"/>
         <log href="{{ artifacts_url_pattern }}/{{ REQUEST_ID }}/work-test-filter{{ '.+' }}/tmt-run.log" name="tmt-log"/>
         <log href="{{ artifacts_url_pattern }}/{{ REQUEST_ID }}/work-test-filter{{ '.+' }}/tmt-reproducer.sh" name="tmt-reproducer"/>
         <log href="{{ artifacts_url_pattern }}/{{ REQUEST_ID }}/work-test-filter{{ '.+' }}/log.txt" name="tmt-verbose-log"/>
         <log href="{{ artifacts_url_pattern }}/{{ REQUEST_ID }}/work-test-filter{{ '.+' }}" name="workdir"/>
        </logs>
        <properties>
         <property name="baseosci.result" value="passed"/>
        </properties>
        <testcase name="/testing-farm/test-filter-script" result="passed" time="{{ '\d+' }}" start-time="{{ timestamp_pattern }}" end-time="{{ timestamp_pattern }}">
         <properties>
          <property name="baseosci.arch" value="{{ ARCH }}"/>
          <property name="baseosci.connectable_host" value="localhost"/>
          <property name="baseosci.distro" value="container"/>
          <property name="baseosci.status" value="Complete"/>
          <property name="baseosci.testcase.source.url" value=""/>
          <property name="baseosci.variant" value=""/>
         </properties>
         <logs>
          <log href="{{ artifacts_url_pattern }}/{{ REQUEST_ID }}/work-test-filter{{ '.+' }}{{ PLAN }}/execute/data/guest/default-0/testing-farm/test-filter-script-1/data" name="data" schedule-entry="None:{{ ARCH }}:{{ PLAN }}" schedule-stage="running"/>
          <log href="{{ artifacts_url_pattern }}/{{ REQUEST_ID }}/work-test-filter{{ '.+' }}{{ PLAN }}/execute/data/guest/default-0/testing-farm/test-filter-script-1/failures.yaml" name="failures.yaml" schedule-entry="None:{{ ARCH }}:{{ PLAN }}" schedule-stage="running"/>
          <log href="{{ artifacts_url_pattern }}/{{ REQUEST_ID }}/work-test-filter{{ '.+' }}{{ PLAN }}/execute/data/guest/default-0/testing-farm/test-filter-script-1" name="log_dir" schedule-entry="None:{{ ARCH }}:{{ PLAN }}" schedule-stage="running"/>
          <log href="{{ artifacts_url_pattern }}/{{ REQUEST_ID }}/work-test-filter{{ '.+' }}{{ PLAN }}/execute/data/guest/default-0/testing-farm/test-filter-script-1/output.txt" name="testout.log" schedule-entry="None:{{ ARCH }}:{{ PLAN }}" schedule-stage="running"/>
         </logs>
         <testing-environment name="requested">
          <property name="arch" value="{{ ARCH }}"/>
          <property name="snapshots" value="False"/>
         </testing-environment>
         <testing-environment name="provisioned">
          <property name="arch" value="{{ ARCH }}"/>
          <property name="compose" value="container"/>
          <property name="snapshots" value="False"/>
         </testing-environment>
        </testcase>
        <testing-environment name="requested">
         <property name="arch" value="{{ ARCH }}"/>
         <property name="snapshots" value="False"/>
        </testing-environment>
        <testing-environment name="provisioned">
         <property name="arch" value="{{ ARCH }}"/>
         <property name="compose" value="container"/>
         <property name="snapshots" value="False"/>
        </testing-environment>
       </testsuite>
       {{ skipped_testsuite_pattern }}
      </testsuites>

  literal-patterns[results-junit.xml]:
    - |
      <?xml version="1.0" encoding="UTF-8"?>
      <testsuites>
       <testsuite name="/check-composes/plan/arr-aws" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/check-composes/plan/bci-beaker" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/check-composes/plan/bci-psi-x86_64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/check-composes/plan/bci-staging-psi-x86_64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/dgoss/build" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/gating/sanity" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/packit/installation" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/empty" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/CentOS-7/aarch64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/CentOS-7/x86_64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/CentOS-Stream-10/aarch64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/CentOS-Stream-10/x86_64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/CentOS-Stream-8/aarch64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/CentOS-Stream-8/x86_64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/CentOS-Stream-9/aarch64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/CentOS-Stream-9/x86_64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/container" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/fedora-rawhide/aarch64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/environments/fedora-rawhide/x86_64" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/exclude" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/failure" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/filter" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/multihost/basic" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/multihost/invalid-provision-how" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/oom" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/reboot" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/reserve" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="/testing-farm/sanity" tests="0" failures="0" errors="0" skipped="0"/>
       <testsuite name="{{ PLAN }}" tests="1" failures="0" errors="0" skipped="0">
        <testcase name="/testing-farm/test-filter-script" classname="tests" time="{{ '\d+' }}" start-time="{{ timestamp_pattern }}" end-time="{{ timestamp_pattern }}">
         <system-out>NAME=&amp;quot;Fedora Linux&amp;quot;
      VERSION=&amp;quot;{{ '\d+' }} (Container Image)&amp;quot;
      RELEASE_TYPE=stable
      ID=fedora
      VERSION_ID={{ '\d+' }}
      VERSION_CODENAME=&amp;quot;&amp;quot;
      PLATFORM_ID=&amp;quot;platform:f{{ '\d+' }}&amp;quot;
      PRETTY_NAME=&amp;quot;Fedora Linux {{ '\d+' }} (Container Image)&amp;quot;
      ANSI_COLOR=&amp;quot;0;38;2;60;110;180&amp;quot;
      LOGO=fedora-logo-icon
      CPE_NAME=&amp;quot;cpe:/o:fedoraproject:fedora:{{ '\d+' }}&amp;quot;
      DEFAULT_HOSTNAME=&amp;quot;fedora&amp;quot;
      HOME_URL=&amp;quot;https://fedoraproject.org/&amp;quot;
      DOCUMENTATION_URL=&amp;quot;https://docs.fedoraproject.org/en-US/fedora/f{{ '\d+' }}/system-administrators-guide/&amp;quot;
      SUPPORT_URL=&amp;quot;https://ask.fedoraproject.org/&amp;quot;
      BUG_REPORT_URL=&amp;quot;https://bugzilla.redhat.com/&amp;quot;
      REDHAT_BUGZILLA_PRODUCT=&amp;quot;Fedora&amp;quot;
      REDHAT_BUGZILLA_PRODUCT_VERSION={{ '\d+' }}
      REDHAT_SUPPORT_PRODUCT=&amp;quot;Fedora&amp;quot;
      REDHAT_SUPPORT_PRODUCT_VERSION={{ '\d+' }}
      SUPPORT_END={{ '\d+' }}-{{ '\d+' }}-{{ '\d+' }}
      VARIANT=&amp;quot;Container Image&amp;quot;
      VARIANT_ID=container
      </system-out>
        </testcase>
       </testsuite>
       <testsuite name="/vm-image-diff/sanity" tests="0" failures="0" errors="0" skipped="0"/>
      </testsuites>
