---

extends:
  - base-tmt-container_pipeline
  - base-tmt-container_checks

marks:
  - public

variables:
  REQUEST_ID: d91cc905-f5b6-448b-a72b-56b1570e85a4
  ARCH: x86_64
  RESULT: FAILED
  GIT_CLONE_URL: https://gitlab.com/testing-farm/tests
  GIT_REF: main
  PLAN: /testing-farm/failure

checks:
  literal-patterns[results.xml]:
    - |
      <?xml version="1.0" encoding="UTF-8"?>
      <testsuites overall-result="failed">
       <properties>
        <property name="baseosci.overall-result" value="failed"/>
       </properties>
       <testsuite name="{{ PLAN }}" result="failed" tests="1">
        <logs>
         <log href="https://artifacts.dev.testing-farm.io/{{ REQUEST_ID }}/work-failure{{ '.+' }}/tmt-run.log" name="tmt-log"/>
         <log href="https://artifacts.dev.testing-farm.io/{{ REQUEST_ID }}/work-failure{{ '.+' }}/tmt-reproducer.sh" name="tmt-reproducer"/>
         <log href="https://artifacts.dev.testing-farm.io/{{ REQUEST_ID }}/work-failure{{ '.+' }}" name="workdir"/>
        </logs>
        <properties>
         <property name="baseosci.result" value="failed"/>
        </properties>
        <testcase name="/testing-farm/failure" result="failed">
         <properties>
          <property name="baseosci.arch" value="{{ ARCH }}"/>
          <property name="baseosci.connectable_host" value="localhost"/>
          <property name="baseosci.distro" value="None"/>
          <property name="baseosci.status" value="Complete"/>
          <property name="baseosci.testcase.source.url" value=""/>
          <property name="baseosci.variant" value=""/>
         </properties>
         <logs>
          <log href="https://artifacts.dev.testing-farm.io/{{ REQUEST_ID }}/work-failure{{ '.+' }}{{ PLAN }}/execute/data/guest/default-0/testing-farm/failure-1" name="log_dir" schedule-entry="None:{{ ARCH }}:{{ PLAN }}" schedule-stage="running"/>
          <log href="https://artifacts.dev.testing-farm.io/{{ REQUEST_ID }}/work-failure{{ '.+' }}{{ PLAN }}/execute/data/guest/default-0/testing-farm/failure-1/output.txt" name="testout.log" schedule-entry="None:{{ ARCH }}:{{ PLAN }}" schedule-stage="running"/>
         </logs>
         <failure/>
         <testing-environment name="requested">
          <property name="arch" value="{{ ARCH }}"/>
          <property name="snapshots" value="False"/>
         </testing-environment>
         <testing-environment name="provisioned">
          <property name="arch" value="{{ ARCH }}"/>
          <property name="snapshots" value="False"/>
         </testing-environment>
        </testcase>
        <testing-environment name="requested">
         <property name="arch" value="{{ ARCH }}"/>
         <property name="snapshots" value="False"/>
        </testing-environment>
        <testing-environment name="provisioned">
         <property name="arch" value="{{ ARCH }}"/>
         <property name="snapshots" value="False"/>
        </testing-environment>
       </testsuite>
      </testsuites>

  literal-patterns[results-junit.xml]:
    - |
      <?xml version="1.0" encoding="UTF-8"?>
      <testsuites>
       <testsuite name="{{ PLAN }}" tests="1" failures="1" errors="0" skipped="0">
        <testcase name="/testing-farm/failure" classname="tests">
         <system-out>NAME="Fedora Linux"
      VERSION="38 (Container Image)"
      ID=fedora
      VERSION_ID=38
      VERSION_CODENAME=""
      PLATFORM_ID="platform:f38"
      PRETTY_NAME="Fedora Linux 38 (Container Image)"
      ANSI_COLOR="0;38;2;60;110;180"
      LOGO=fedora-logo-icon
      CPE_NAME="cpe:/o:fedoraproject:fedora:38"
      DEFAULT_HOSTNAME="fedora"
      HOME_URL="https://fedoraproject.org/"
      DOCUMENTATION_URL="https://docs.fedoraproject.org/en-US/fedora/f38/system-administrators-guide/"
      SUPPORT_URL="https://ask.fedoraproject.org/"
      BUG_REPORT_URL="https://bugzilla.redhat.com/"
      REDHAT_BUGZILLA_PRODUCT="Fedora"
      REDHAT_BUGZILLA_PRODUCT_VERSION=38
      REDHAT_SUPPORT_PRODUCT="Fedora"
      REDHAT_SUPPORT_PRODUCT_VERSION=38
      SUPPORT_END=2024-05-14
      VARIANT="Container Image"
      VARIANT_ID=container
      </system-out>
         <failure type="FAIL" message='Test "/testing-farm/failure" failed.'/>
        </testcase>
       </testsuite>
      </testsuites>
