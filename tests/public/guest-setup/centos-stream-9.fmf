---
summary: Test guest-setup on CentOS Stream 9

provision:
  how: virtual
  image: CentOS-Stream-9

prepare:
  - name: pre-artifact-installation
    how: ansible
    playbook: ranch/public/citool-config/guest-setup/pre-artifact-installation/entrypoint.yml
    extra-args: "-e IMAGE_NAME=CentOS-Stream-9"

discover+:
  how: shell
  tests+:
    - name: Test installed koji package
      test: rpm -qi koji

    - name: Test if tag repository added
      test: test -e /etc/yum.repos.d/tag-repository.repo

    - name: Test for correct koji version
      test: rpm -q koji | grep koji-1\.28\.1
